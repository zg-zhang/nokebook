# flat(), flatMap() 变一维数组

## flat()
数组的成员有时还是数组，flat 方法用于将嵌套的数组拉平，变成一维数组，该方法返回一个新数组，对原数据没有影响
```javascript
[1, 2, [3, 4]].flat()
// [1, 2, 3, 4]
```
flat() 默认只会拉平一层，如果想要拉平多层，可以将 flat 方法的参数写成一个整数，默认为 1
```javascript
[1, 2, [3, [4, 5]]].flat()
// [1, 2, 3, [4, 5]]

[1, 2, [3, [4, 5]]].flat(2)
// [1, 2, 3, 4, 5]

// 不管有多少层都可以拉平
[1, [2, [3]]].flat(Infinity)
// [1, 2, 3]
```
如果原数组有空位，flat 方法会跳过空位
```javascript
[1, 2, , 4, 5].flat()
// [1, 2, 4, 5]
```
## flatMap()
flatMap 方法对原数组的每个成员执行一个函数，相当于执行 map，然后对返回值形成的数组执行 flat 方法，该方法返回一个新数组，不改变原数组
```javascript
// 相当于 [[2, 4], [3, 6], [4, 8]].flat()
[2, 3, 4].flatMap((x) => [x, x * 2])
// [2, 4, 3, 6, 4, 8]
```
flatMap 方法只能展开一层数组
flatMap 方法的参数是一个遍历函数，该函数可以接受三个参数：当前数组成员、当前数组成员的位置、原数组
```javascript
arr.flatMap(function callback(currentValue[, index[, array]]) {
  // ...
}[, thisArg])
```
flatMap 方法还可以有第二个参数，用来绑定遍历函数里面的 this
